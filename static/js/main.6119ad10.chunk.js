(this["webpackJsonpmazio-web"]=this["webpackJsonpmazio-web"]||[]).push([[0],{46:function(e,t,n){},70:function(e,t,n){e.exports=n(91)},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),l=n.n(c),o=n(12),i=n.n(o),u=n(62),m=n(7),s=n(101),f=n(63),E=n(60),d=n(8),v=(n(80),n(21)),O=n(26),p=n(22),y=n(27),T=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){return Object(v.a)(this,n),t.call(this,"Wall type: ".concat(e))}return n}(Object(y.a)(Error)),R=n(13);!function(e){e.NONE="NONE"}(a||(a={})),function(e){e.STONE="STONE",e.RUBBER="RUBBER",e.TRANSLUCENT="TRANSLUCENT",e.OUTPUT="OUTPUT",e.EXTERNAL="EXTERNAL"}(r||(r={}));var N=Object(R.a)({},r,{},a);var b=function(e,t){return(e!==N.OUTPUT||t===N.EXTERNAL)&&((e===N.OUTPUT||t!==N.EXTERNAL)&&t!==N.OUTPUT)},h="MAZE_CELL",g="MAZE_WALL",w=(n(46),n(105));function j(e,t,n){return{accept:e,drop:function(e){return function(e,t,n){var a=(c=e,{type:c.elementType,location:c.location}),r=n(a.type);var c;null===r||void 0===r||r(a,t)}(e,t,n)},collect:A}}function A(e){return{isOver:e.isOver(),draggedItem:e.getItem()}}var S,x=n(19),I=n.n(x),U=Object(c.forwardRef)((function(e,t){var n=e.danger,a=e.className,r=Object(c.useState)(!1),o=Object(m.a)(r,2),i=o[0],u=o[1],s="maze-element ".concat(n?"danger":""," ").concat(a),f=function(e){return e.blur()};return l.a.createElement("div",{ref:t,tabIndex:0,className:s,onFocus:function(){return setTimeout((function(){return u(!0)}),200)},onBlur:function(){return u(!1)},onClick:function(e){return i&&f(e.target)},onKeyDown:function(e){return Object(x.getCode)(e)===I.a.Escape&&f(e.target)}})})),L=n(104),P=Object(c.forwardRef)((function(e,t){var n,a,r=e.element,c=e.dragItemType,o=e.className,i=e.moveElement,u=e.elementMovingValidators,s=t,f=u?(n=u,a=r.type,function(e){return function(e,t,n){return e.map((function(e){return e(t,n)})).some((function(e){return e}))}(n,e,a)}):function(){return!0},E=Object(L.a)(j(c,r,(function(e){return f(e)?i:void 0}))),d=Object(m.a)(E,2),v=d[0],O=v.draggedItem,p=v.isOver;(0,d[1])(s);var y=p&&O&&f(O.elementType)?"drag-hover":"",T="".concat(y," ").concat(o);return l.a.createElement(U,{ref:t,className:T})})),z=function(e){var t=e.element,n=e.dragItemType,a=e.dragItemNoneTypes,r=e.className,o=e.moveElement,i=e.elementMovingValidators,u=Object(c.useRef)(null),s=Object(w.a)(function(e,t,n,a,r){var c=e.type;return{item:{type:n,elementType:c,location:e.location,className:r},canDrag:!a.includes(c),end:function(){var e;return null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.blur()}}}(t,u,n,a,r||""));return(0,Object(m.a)(s,2)[1])(u),o?l.a.createElement(P,{ref:u,className:r,element:t,dragItemType:n,moveElement:o,elementMovingValidators:i}):l.a.createElement(U,{ref:u,className:r})};!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(S||(S={}));var C,_=function(e){var t=e.position,n=e.wall,a=e.moveWall,r=function(e){return"wall-".concat(e===S.HORIZONTAL?"h":"v")}(t),c=function(e){switch(e){case N.STONE:return"wall-stone";case N.OUTPUT:return"wall-output";case N.RUBBER:return"wall-rubber";case N.TRANSLUCENT:return"wall-translucent";case N.EXTERNAL:return"wall-external";case N.NONE:return"wall-none";default:throw new T(e)}}(n.type),o="wall ".concat(r," ").concat(c);return l.a.createElement(z,{className:o,element:n,dragItemType:g,dragItemNoneTypes:[N.NONE,N.EXTERNAL],moveElement:a,elementMovingValidators:[b]})},W=function(e){var t=e.className,n=e.children;return l.a.createElement("div",{className:"d-flex ".concat(t||"")},n)},V=(n(81),function(e){var t=e.disabled,n=e.children,a="danger-zone ".concat(t?"":"danger-zone-enabled");return l.a.createElement("div",{className:a},n)}),D=function(e){var t=e.elementNumber,n=e.lastElementNumber,a=e.isRestricted,r=e.children;return t===n?l.a.createElement(V,{disabled:!a},r):l.a.createElement(l.a.Fragment,null,r)},B=function(e){var t=e.wallsRow,n=e.moveWall,a=e.restrictedSize;return l.a.createElement(W,null,t.map((function(e,r){return l.a.createElement(D,{elementNumber:r,lastElementNumber:t.length-1,isRestricted:!!(null===a||void 0===a?void 0:a.width)},l.a.createElement(_,{position:S.HORIZONTAL,wall:t[r],moveWall:n}))})))};n(82);!function(e){e.ARSENAL="ARSENAL",e.HOSPITAL="HOSPITAL",e.TREASURE="TREASURE",e.FAKE_TREASURE="FAKE_TREASURE",e.SPAWN="SPAWN",e.RIVER="RIVER",e.RIVER_START="RIVER_START",e.RIVER_END="RIVER_END",e.TRAP="TRAP",e.PIT_IN="PIT_IN",e.PIT_OUT="PIT_OUT"}(C||(C={}));var M=Object(R.a)({},C,{},a),k=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){return Object(v.a)(this,n),t.call(this,"Cell type: ".concat(e))}return n}(Object(y.a)(Error));var H=function(e){var t=e.cell,n=e.moveCell,a=function(e){switch(e){case M.ARSENAL:return"cell-arsenal";case M.HOSPITAL:return"cell-hospital";case M.TREASURE:return"cell-treasure";case M.FAKE_TREASURE:return"cell-fake-treasure";case M.SPAWN:return"cell-spawn";case M.RIVER:return"cell-river";case M.RIVER_START:return"cell-river-start";case M.RIVER_END:return"cell-river-end";case M.TRAP:return"cell-trap";case M.PIT_IN:return"cell-pit-in";case M.PIT_OUT:return"cell-pit-out";case M.NONE:return"cell-none";default:throw new k(e)}}(t.type);return l.a.createElement(z,{className:"cell ".concat(a),element:t,dragItemType:h,dragItemNoneTypes:[M.NONE],moveElement:n})},X=function(e){var t=e.wallsRow,n=e.cellsRow,a=e.moveCell,r=e.moveWall,c=e.restrictedSize,o=function(e){return l.a.createElement(_,{position:S.VERTICAL,wall:e,moveWall:r})},i=Object(d.range)(n.length).map((function(e){return l.a.createElement(D,{elementNumber:e,lastElementNumber:n.length-1,isRestricted:!!(null===c||void 0===c?void 0:c.width)},o(t[e]),l.a.createElement(H,{cell:n[e],moveCell:a}))}));return i.push(o(t[n.length])),l.a.createElement(W,null,i)},F=function(e){var t=e.wallsRows,n=e.cellsRows,a=e.moveCell,r=e.moveWall,c=e.restrictedSize,o=function(e){return l.a.createElement(B,{wallsRow:e,moveWall:r,restrictedSize:c})},i=Object(d.range)(n.length).map((function(e){return function(e){return[o(t[2*e]),l.a.createElement(X,{wallsRow:t[2*e+1],cellsRow:n[e],moveCell:a,moveWall:r,restrictedSize:c})]}(e).map((function(t){return function(e,t){return l.a.createElement(D,{elementNumber:e,lastElementNumber:n.length-1,isRestricted:!!(null===c||void 0===c?void 0:c.height)},t)}(e,t)}))}));return l.a.createElement("div",{className:"maze"},Object(d.flatten)(i),o(t[t.length-1]))},K=function(e){var t=e.children;return l.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},t)},Z=function(e){var t=e.children;return l.a.createElement("div",{className:"m-1"},t)},J=n(103),q=n(97),$=function(e){var t=e.text,n=e.children;return c.createElement(J.a,{overlay:c.createElement(q.a,{id:"tooltip-".concat(t)},t),delay:{show:500,hide:0}},c.createElement("div",null,n))},G=function(e){var t=e.md,n=e.children;return l.a.createElement(E.a,{md:t,className:"p-3 border rounded bg-light"},n)},Q=function(e){var t=e.cellTypes,n=e.wallTypes;return l.a.createElement(G,null,l.a.createElement("h4",null,"Cells"),l.a.createElement(K,null,t.map((function(e){return l.a.createElement(Z,{key:e},l.a.createElement($,{text:e},l.a.createElement(H,{cell:{type:e,location:{x:-1,y:-1}}})))}))),l.a.createElement("hr",null),l.a.createElement("h4",null,"Walls"),l.a.createElement(K,null,n.map((function(e){return l.a.createElement(Z,{key:e},l.a.createElement($,{text:e},l.a.createElement(_,{wall:{type:e,location:{x:-1,y:-1}},position:S.HORIZONTAL})))}))))},Y=n(98),ee=function(e){var t=e.children;return l.a.createElement(Y.a,null,l.a.createElement("div",{className:"d-flex justify-content-between my-3"},t))},te=n(99);n(84);function ne(e){var t=e.x,n=e.y;return{transform:"translate(".concat(t,"px, ").concat(n,"px)")}}function ae(e){return e.location.x>=0}function re(e){return Object.values(e).some((function(e){return Math.abs(e)>1}))}var ce=function(e){var t=e.isOutsideMaze,n=Object(te.a)((function(e){return{isDragging:e.isDragging(),item:e.getItem(),currentOffset:e.getSourceClientOffset(),offsetDiff:e.getDifferenceFromInitialOffset()}})),a=n.isDragging,r=n.item,c=n.currentOffset,o=n.offsetDiff;return a&&o&&c?l.a.createElement("div",{className:"maze-element-drag-layer",style:ne(c)},l.a.createElement(U,{danger:t&&ae(r)&&re(o),className:r.className})):null},le=function(e){var t=e.children,n=Object(L.a)({accept:[h,g],collect:function(e){return{isOver:e.isOver()}}}),a=Object(m.a)(n,2),r=a[0].isOver,c=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(ce,{isOutsideMaze:!r}),l.a.createElement("div",{className:"w-100 h-100",ref:c},t))},oe=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){return Object(v.a)(this,n),t.call(this,"Item type: ".concat(e))}return n}(Object(y.a)(Error));n(85);var ie=function(e){var t=e.removeCell,n=e.removeWall,a=e.children,r=Object(L.a)(function(e){return{accept:[h,g],drop:function(t,n){var a=e(t.type.toString());a&&n.isOver({shallow:!0})&&a({type:t.elementType,location:t.location})}}}((function(e){switch(e){case h:return t;case g:return n;default:throw new oe(e)}}))),c=Object(m.a)(r,2)[1];return l.a.createElement("div",{ref:c,className:"maze-editor-drop-context"},a)},ue=n(16);function me(e,t){var n=function(e){var t=2*e.height+1,n=Object(d.range)(1,t-1).map((function(t){var n=t%2===0?0:1,a=Object(d.range)(e.width-n).map((function(e){return{location:{x:e+n,y:t},type:N.NONE}})),r=function(e){return{location:{x:e,y:t},type:N.EXTERNAL}};return n?Object(d.concat)(r(0),a,r(e.width-1+n)):a})),a=function(t){return Object(d.range)(e.width).map((function(e){return{location:{x:e,y:t},type:N.EXTERNAL}}))};return[a(0)].concat(Object(ue.a)(n),[a(t-1)])}(e);return t.forEach((function(e){var t=e.location,a=t.x,r=t.y;n[r][a].type=e.type})),n}function se(e,t){var n=function(e){return Object(d.range)(e.height).map((function(t){return Object(d.range)(e.width).map((function(e){return{location:{x:e,y:t},type:M.NONE}}))}))}(e);return t.forEach((function(e){var t=e.location,a=t.x,r=t.y;n[r][a].type=e.type})),n}function fe(e){return Object(d.flatten)(e).filter((function(e){return e.type!==a.NONE}))}function Ee(e){return fe(e).filter((function(e){return e.type!==N.EXTERNAL}))}function de(e){return fe(e)}function ve(e,t,n){var a,r,c=function(e,t){var n=t.height,a=t.width,r=e.filter((function(e){return e.location.x===a})),c=e.filter((function(e){return Math.floor(e.location.y/2)===n})),l=e.filter((function(e){return!Oe(e)}));return[[].concat(Object(ue.a)(l),Object(ue.a)(c)),[].concat(Object(ue.a)(l),Object(ue.a)(r))].map((function(e){return e.map((function(e){return e.location})).map((function(e){var t=e.x,n=e.y;return{x:t,y:Math.floor(n/2)}})).map(pe)}))}(e,n),l=function(e){return e.map((function(e){return e.location})).map(pe)}(t),o=c.map((function(e){return[].concat(Object(ue.a)(l),Object(ue.a)(e))})),i=Object(m.a)(o,2),u=i[0],s=i[1];return{width:(null===(a=Object(d.maxBy)(u,(function(e){return e.width})))||void 0===a?void 0:a.width)||1,height:(null===(r=Object(d.maxBy)(s,(function(e){return e.height})))||void 0===r?void 0:r.height)||1}}function Oe(e){return e.type===N.OUTPUT&&!Object.values(e.location).includes(0)}function pe(e){return{width:e.x+1,height:e.y+1}}function ye(e,t,n){return function(e,t,n){return e.map((function(e){if(!Oe(e))return e;var a=e.location,r=a.x,c=a.y,l=r===t.width?{x:n.width,y:c}:{x:r,y:2*n.height};return Object(R.a)({},e,{location:l})}))}(e,t,n)}function Te(e,t){return function(n,a){var r=n.location.x<0?function(e,t,n){var a=Object(d.cloneDeep)(e),r=n.x,c=n.y;return a[c][r].type=t,a}(e,n.type,a.location):function(e,t,n){var a=Object(d.cloneDeep)(e);return a[t.y][t.x].type=e[n.y][n.x].type,a[n.y][n.x].type=e[t.y][t.x].type,a}(e,n.location,a.location);t(r)}}function Re(e,t){return function(n){if(!(n.location.x<0||n.location.y<0)){var r=Object(d.cloneDeep)(e);r[n.location.y][n.location.x].type=function(e){if(e===N.OUTPUT)return N.EXTERNAL;return a.NONE}(n.type),t(r)}}}var Ne=[M.SPAWN,M.ARSENAL,M.HOSPITAL,M.TREASURE,M.FAKE_TREASURE,M.TRAP,M.PIT_IN,M.RIVER_START],be=[N.OUTPUT,N.STONE,N.RUBBER,N.TRANSLUCENT],he=n(32),ge=n(100),we=n(61),je=n(102);function Ae(e){switch(Object(x.getCode)(e)){case x.ArrowUp:case x.ArrowDown:return;default:e.preventDefault()}}n(86);var Se=function(e){var t=e.className,n=Object(we.a)(e,["className"]);return l.a.createElement(je.a.Control,Object.assign({},n,{className:"hidden-caret ".concat(t),type:"number",onKeyDown:Ae}))},xe=function(e){var t=e.minSize,n=e.size,a=e.setSize,r=e.onRestrictedSize,c=function(e){return l.a.createElement(Se,{required:!0,value:n[e],onChange:function(c){var l=parseInt(c.target.value,10);l<t[e]?null===r||void 0===r||r(Object(he.a)({},e,l)):a(Object(R.a)({},n,Object(he.a)({},e,l)))}})};return l.a.createElement(G,null,l.a.createElement("h4",null,"Size"),l.a.createElement(ge.a,{className:"justify-content-center align-items-center"},l.a.createElement(E.a,{md:4},c("width")),l.a.createElement("div",{className:"font-weight-bolder"},"\u2715"),l.a.createElement(E.a,{md:4},c("height"))))},Ie=(n(88),function(e){var t=e.md,n=e.children;return l.a.createElement(E.a,{md:t,className:"form-containers-wrapper"},n)}),Ue=function(e){var t=e.children;return l.a.createElement("div",{className:"d-flex h-100 overflow-auto border rounded bg-light"},l.a.createElement("div",{className:"d-inline-block m-auto p-3"},t))},Le=function(e){var t=e.children,n=e.className,a=Object(c.useRef)(null);return a.current&&(a.current.style.height="".concat(a.current.offsetWidth,"px")),l.a.createElement("div",{ref:a,className:n},t)},Pe=[{location:{x:3,y:14},type:N.OUTPUT},{location:{x:3,y:0},type:N.OUTPUT},{location:{x:0,y:7},type:N.OUTPUT},{location:{x:7,y:7},type:N.OUTPUT},{location:{x:3,y:3},type:N.STONE},{location:{x:3,y:4},type:N.RUBBER},{location:{x:3,y:5},type:N.TRANSLUCENT}],ze=[{location:{x:0,y:0},type:M.SPAWN},{location:{x:1,y:0},type:M.TREASURE},{location:{x:2,y:0},type:M.FAKE_TREASURE},{location:{x:3,y:0},type:M.HOSPITAL},{location:{x:4,y:0},type:M.ARSENAL},{location:{x:5,y:0},type:M.RIVER_START},{location:{x:6,y:0},type:M.RIVER},{location:{x:0,y:1},type:M.RIVER_END},{location:{x:1,y:1},type:M.TRAP},{location:{x:2,y:1},type:M.PIT_IN},{location:{x:3,y:1},type:M.PIT_OUT}],Ce={height:7,width:7},_e=function(){var e=Object(c.useState)(ve(Pe,ze,Ce)),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(Ce),o=Object(m.a)(r,2),i=o[0],u=o[1],d=Object(c.useState)(me(Ce,Pe)),v=Object(m.a)(d,2),O=v[0],p=v[1],y=Object(c.useState)(se(Ce,ze)),T=Object(m.a)(y,2),R=T[0],N=T[1],b=Object(c.useState)({}),h=Object(m.a)(b,2),g=h[0],w=h[1];Object(c.useEffect)((function(){var e=ve(Ee(O),de(R),i);a(e)}),[R,i,O]);var j=Te(O,p),A=Te(R,N),S=Re(O,p),x=Re(R,N);return l.a.createElement(s.a,{backend:f.a,options:{enableMouseEvents:!0}},l.a.createElement(ie,{removeWall:S,removeCell:x},l.a.createElement(ee,null,l.a.createElement(E.a,{md:8},l.a.createElement(le,null,l.a.createElement(Le,null,l.a.createElement(Ue,null,l.a.createElement(F,{wallsRows:O,cellsRows:R,moveWall:j,moveCell:A,restrictedSize:g}))))),l.a.createElement(Ie,{md:4},l.a.createElement(xe,{minSize:n,size:i,setSize:function(e){var t=ye(Ee(O),i,e);p(me(e,t)),N(se(e,de(R))),u(e)},onRestrictedSize:function(e){w(e),setTimeout((function(){return w({})}),300)}}),l.a.createElement(Q,{cellTypes:Ne,wallTypes:be})))))},We=function(){return l.a.createElement(_e,null)},Ve=n(66),De=n(10),Be=Object(De.c)({}),Me=Object(Ve.a)({reducer:Be});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(89),n(90);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(u.a,{store:Me},l.a.createElement(We,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.6119ad10.chunk.js.map